# main
main(): repl-loop("")

# read
READ(str): read-string(str)

# eval
EVAL(ast): ast

# print
PRINT(ast): pr-str(ast)

# repl
rep(strng):
  PRINT((EVAL (READ strng)))

# repl loop
repl-loop(line):
  if line:
  - - if (not (= "" line)):
      - try:
        - println((rep line))
        - (catch exc
            (println "Uncaught exception:" exc)))
    - repl-loop((readline "mal-user> "))
